doctype html
head
  meta(charset='utf-8')
  meta(name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no')
  meta(name='description' content='Start your development with a Dashboard for Bootstrap 4.')
  meta(name='author' content='Kelvin Chege M')
  title= title
  // Favicon
  link(href='/assets/img/brand/favicon.png' rel='icon' type='image/png')
  // Fonts
  link(href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700' rel='stylesheet')
  // Icons
  link(href='/assets/vendor/nucleo/css/nucleo.css' rel='stylesheet')
  link(href='/assets/vendor/@fortawesome/fontawesome-free/css/all.min.css' rel='stylesheet')
  link(href='/stylesheets/bootstrap-select.min.css'  rel='stylesheet')
  link(href='/stylesheets/jquery.dataTables.css' rel='stylesheet')
  link(href='/stylesheets/responsive.dataTables.min.css' rel='stylesheet')
  link(href='/stylesheets/jquery.timepicker.min.css' rel='stylesheet')
  link(href='https://cdn.datatables.net/buttons/1.5.6/css/buttons.dataTables.min.css' rel='stylesheet')
  script(src='/assets/vendor/jquery/dist/jquery.min.js')
  script(src='/javascripts/jquery.dataTables.js')
  // Argon CSS
  link(type='text/css' href='/assets/css/argon.css?v=1.0.0' rel='stylesheet')
  link(type='text/css' href='//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css')
// Sidenav
nav#sidenav-main.navbar.navbar-vertical.fixed-left.navbar-expand-md.navbar-light.bg-white
  .container-fluid
    // Toggler
    button.navbar-toggler(type='button' data-toggle='collapse' data-target='#sidenav-collapse-main' aria-controls='sidenav-main' aria-expanded='false' aria-label='Toggle navigation')
      span.navbar-toggler-icon
    // Brand
    a.navbar-brand.pt-0(href='./index.html')
      img.navbar-brand-img(src='/images/logo.png' alt='...')
    // User
    ul.nav.align-items-center.d-md-none
      li.nav-item.dropdown
        a.nav-link.nav-link-icon(href='#' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false')
          i.ni.ni-bell-55
        .dropdown-menu.dropdown-menu-arrow.dropdown-menu-right(aria-labelledby='navbar-default_dropdown_1')
          a.dropdown-item(href='#') Action
          a.dropdown-item(href='#') Another action
          .dropdown-divider
          a.dropdown-item(href='#') Something else here
      li.nav-item.dropdown
        a.nav-link(href='#' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false')
          .media.align-items-center
            span.avatar.avatar-sm.rounded-circle
              img(alt='Image placeholder' src='/images/logo.png')
        .dropdown-menu.dropdown-menu-arrow.dropdown-menu-right
          .dropdown-header.noti-title
            h6.text-overflow.m-0 Welcome!
          a.dropdown-item(href='./examples/profile.html')
            i.ni.ni-single-02
            span My profile
          a.dropdown-item(href='./examples/profile.html')
            i.ni.ni-settings-gear-65
            span Settings
          a.dropdown-item(href='./examples/profile.html')
            i.ni.ni-calendar-grid-58
            span Activity
          a.dropdown-item(href='./examples/profile.html')
            i.ni.ni-support-16
            span Support
          .dropdown-divider
          a.dropdown-item(href='#!')
            i.ni.ni-user-run
            span Logout
    // Collapse
    #sidenav-collapse-main.collapse.navbar-collapse
      // Collapse header
      .navbar-collapse-header.d-md-none
        .row
          .col-6.collapse-brand
            a(href='./index.html')
              img(src='./assets/img/brand/blue.png')
          .col-6.collapse-close
            button.navbar-toggler(type='button' data-toggle='collapse' data-target='#sidenav-collapse-main' aria-controls='sidenav-main' aria-expanded='false' aria-label='Toggle sidenav')
              span
              span
      // Form
      form.mt-4.mb-3.d-md-none
        .input-group.input-group-rounded.input-group-merge
          input.form-control.form-control-rounded.form-control-prepended(type='search' placeholder='Search' aria-label='Search')
          .input-group-prepend
            .input-group-text
              span.fa.fa-search
      // Navigation
      ul.navbar-nav
        li.nav-item
          a.nav-link(href='/')
            i.ni.ni-tv-2.text-green
            |  Dashboard
        li.nav-item
          a.nav-link(href='/items/unassigned')
            i.fas.fa-file-alt.text-green
            |  Unassigned Orders
        li.nav-item
          a.nav-link(href='/items')
            i.fas.fa-folder.text-green
            |  All Orders
        li.nav-item
          a.nav-link(href='/users/managers')
            i.fas.fa-users.text-green
            |  Managers
        li.nav-item
          a.nav-link(href='/vehicles')
            i.fas.fa-truck.text-green           
            |  Vehicles
        if loggedin
          if user.categoryId == 1
            li.nav-item
              a.nav-link(href='/routes')
                i.fas.fa-user-ninja.text-green 
                |  Routes
            li.nav-item
              a.nav-link(href='/branches')
                i.ni.ni-bullet-list-67.text-green
                |  Branches
          
      // Divider
      hr.my-3
    
        
// Main content
.main-content
  // Top navbar
  nav#navbar-main.navbar.navbar-top.navbar-expand-md.navbar-dark
    .container-fluid
      // Brand
      a.h4.mb-0.text-white.text-uppercase.d-none.d-lg-inline-block(href='./index.html') Dashboard
      // Form
      form.navbar-search.navbar-search-dark.form-inline.mr-3.d-none.d-md-flex.ml-lg-auto
        .form-group.mb-0
          .input-group.input-group-alternative
            .input-group-prepend
              span.input-group-text
                i.fas.fa-search
            input.form-control(placeholder='Search' type='text')
      // User
      ul.navbar-nav.align-items-center.d-none.d-md-flex
        li.nav-item.dropdown
          a.nav-link.pr-0(href='#' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false')
            .media.align-items-center
              span.avatar.avatar-sm.rounded-circle
                img(alt='Image placeholder' src='./assets/img/theme/team-4-800x800.jpg')
              .media-body.ml-2.d-none.d-lg-block
                span.mb-0.text-sm.font-weight-bold 
                  if loggedin 
                    =user.name
          .dropdown-menu.dropdown-menu-arrow.dropdown-menu-right
            .dropdown-header.noti-title
              h6.text-overflow.m-0 Welcome!
            a.dropdown-item(href='./examples/profile.html')
              i.ni.ni-single-02
              span My profile
              i.ni.ni-support-16
              span Support
            .dropdown-divider
            a.dropdown-item(href='/logout')
              i.ni.ni-user-run
              span Logout
  // Header
  .header.bg-gradient-success.pb-4.pt-4.pt-md-6
    .container-fluid
      .header-body
        // Card stats
        .row
          .col-xl-3.col-lg-6
            .card.card-stats.mb-4.mb-xl-0
              .card-body
                .row
                  .col
                    h5.card-title.text-uppercase.text-muted.mb-0 Users
                    .col
                      strong.font-weight-bold.mb-0 
                      | Managers:  
                      =allmanagers
                    .col
                      strong.font-weight-bold.mb-0 
                      | Couriers: 
                      = allcouriers
                  .col-auto
                    .icon.icon-shape.bg-yellow.text-white.rounded-circle.shadow
                      i.fas.fa-users
          .col-xl-3.col-lg-6
            .card.card-stats.mb-4.mb-xl-0
              .card-body
                .row
                  .col
                    h5.card-title.text-uppercase.text-muted.mb-0 Orders
                    .col
                      strong.font-weight-bold.mb-0 
                      | Unassigned:  
                      =unassigned
                    .col
                      strong.font-weight-bold.mb-0 
                      | Delivered: 
                      = totalOrders
                  .col-auto
                    .icon.icon-shape.bg-yellow.text-white.rounded-circle.shadow
                      i.fas.fa-chart-pie
          .col-xl-3.col-lg-6
            .card.card-stats.mb-4.mb-xl-0
              .card-body
                .row
                  .col
                    h5.card-title.text-uppercase.text-muted.mb-0 Routes
                    .col
                      strong.font-weight-bold.mb-0 
                      | All Routes:  
                      =allroutes
                    
                  .col-auto
                    .icon.icon-shape.bg-yellow.text-white.rounded-circle.shadow
                      i.fas.fa-globe
          .col-xl-3.col-lg-6
            .card.card-stats.mb-4.mb-xl-0
              .card-body
                .row
                  .col
                    h5.card-title.text-uppercase.text-muted.mb-0 Branches
                    .col
                      strong.font-weight-bold.mb-0 
                      | All Branches:  
                      =allbranches
                    
                  .col-auto
                    .icon.icon-shape.bg-yellow.text-white.rounded-circle.shadow
                      i.fas.fa-map
  // Page content
  .container-fluid.mt--12.p-2
    - if(msgerror.length)
      .alert.alert-danger
        =msgerror
    if msginfo.length
      .alert.alert-info 
        =msginfo 
    if msgsuccess.length 
      .alert.alert-success 
        =msgsuccess
    if msgprimary.length
      .alert.alert-primary 
        =msgprimary
    if msgwarning.length
      .alert.alert-warning
        =msgwarning
    if msgdefault.length 
      .alert.alert-default
        =msgdefault
    block content
      
    // Footer
    footer.footer
      .row.align-items-center.justify-content-xl-between
        .col-xl-6
          .copyright.text-center.text-xl-left.text-muted
            | &copy; 2018
            a.font-weight-bold.ml-1(href='https://www.creative-tim.com' target='_blank') Creative Tim
        .col-xl-6
          ul.nav.nav-footer.justify-content-center.justify-content-xl-end
            li.nav-item
              a.nav-link(href='https://www.creative-tim.com' target='_blank') Creative Tim
            li.nav-item
              a.nav-link(href='https://www.creative-tim.com/presentation' target='_blank') About Us
            li.nav-item
              a.nav-link(href='http://blog.creative-tim.com' target='_blank') Blog
            li.nav-item
              a.nav-link(href='https://github.com/creativetimofficial/argon-dashboard/blob/master/LICENSE.md' target='_blank') MIT License

  
// Argon Scripts
// Core

script(src='/assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js')

script(src='/javascripts/bootstrap-select.min.js')

script(src='/javascripts/dataTables.responsive.min.js')

script(src='/assets/vendor/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js')
script(src='//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js')
// Optional JS
script(src="/assets/vendor/anchor-js/anchor.min.js")
script(src="/assets/vendor/clipboard/dist/clipboard.min.js")
script(src="/assets/vendor/holderjs/holder.min.js")
script(src="/assets/vendor/prismjs/prism.js")

script(src="/assets/vendor/prismjs/prism.js")
// Argon JS

script(src='/assets/js/argon.js?v=1.0.0')

script.
  
  $(document).ready(function() {
    //Date picker
    $('.datepicker').datepicker('update', new Date());
    $('.timepicker').timepicker({
        timeFormat: 'h:mm p',
        interval: 60,
        minTime: '08',
        maxTime: '10:00pm',
        defaultTime: '08',
        startTime: '08:00',
        dynamic: false,
        dropdown: true,
        scrollbar: true
    });
      // Setup - add a text input to each footer cell
      $('#items tfoot th').each( function () {
          var title = $(this).text();
          $(this).html( '<input type="text" placeholder="Search '+title+'" />' );
      } );
   
      // DataTable
      var table = $('.export').DataTable({
        "aoColumnDefs": [
          { "sClass": "my_class", "aTargets": [ 0 ] }
        ],
        dom: 'Bfrtip',
        buttons: [
            'copy', 'csv', 'excel', {
                extend: 'pdf',
                messageTop: 'Items for Delivery'
            }, 'print'
        ]
      });
   
      // Apply the search
      table.columns().every( function () {
          var that = this;
   
          $( 'input', this.footer() ).on( 'keyup change', function () {
              if ( that.search() !== this.value ) {
                  that
                      .search( this.value )
                      .draw();
              }
          } );
      } );
  } );
